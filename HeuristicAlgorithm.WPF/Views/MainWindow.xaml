<Window x:Class="HeuristicAlgorithm.WPF.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:HeuristicAlgorithm.WPF"
        xmlns:models="clr-namespace:HeuristicAlgorithm.WPF.Models"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800">
    <Window.InputBindings>
        <KeyBinding Gesture="Ctrl+O" Command="{Binding OpenFileCommand}"/>
    </Window.InputBindings>

    <Window.Resources>

        <Style TargetType="TextBox">
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="Width" Value="60"/>
            <Setter Property="Margin" Value="3 0"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <Style TargetType="TextBlock">
            <Setter Property="Margin" Value="3 0"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <!-- Iterative Improve -->
        <DataTemplate DataType="{x:Type models:ParamII}">
            <StackPanel Orientation="Horizontal">
                <Button Content="Run" 
                    Command="{Binding DataContext.IterativeImprovementCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                    Margin="5 0"/>
            </StackPanel>
        </DataTemplate>

        <!-- Simulated Annealing -->
        <DataTemplate DataType="{x:Type models:ParamSA}">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Initial Temperature"/>
                <TextBox Text="{Binding Temperature}"/>
                <TextBlock Text="Epsilon"/>
                <TextBox Text="{Binding Epsilon}"/>
                <TextBlock Text="Theta"/>
                <TextBox Text="{Binding Theta}"/>
                <Button Content="Run" 
                    Command="{Binding DataContext.SimulatedAnnealingCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
            </StackPanel>
        </DataTemplate>

        <!-- Tabu Search -->
        <DataTemplate DataType="{x:Type models:ParamTS}">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Tenure"/>
                <TextBox Text="{Binding Tenure}"/>
                <TextBlock Text="Iterations"/>
                <TextBox Text="{Binding MaxIter}"/>
                <Button Content="Run" 
                    Command="{Binding DataContext.TabuSearchCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
            </StackPanel>
        </DataTemplate>

    </Window.Resources>

    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="檔案(_F)">
                <MenuItem Header="開啟(_O)" Command="{Binding OpenFileCommand}"/>
                <Separator/>
                <MenuItem Header="結束(_E)" Command="{Binding ExitCommand}"/>
            </MenuItem>
        </Menu>
        <StatusBar DockPanel.Dock="Bottom">
            <TextBlock Name="StatusText" Text="{Binding StatusString}" />
        </StatusBar>

        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="5">
            <TextBlock Text="選擇演算法" VerticalAlignment="Center" Margin="3 0"/>
            <ComboBox SelectedIndex="0" Width="180" Margin="5 0"
                      ItemsSource="{Binding AlgorithmTypes}" 
                      SelectedItem="{Binding SelectedAlgorithm, Mode=TwoWay}" />

            <ContentControl Content="{Binding SelectedParam}">
                <ContentControl.Style>
                    <Style TargetType="ContentControl">
                        <Style.Triggers>
                            <Trigger Property="Content" Value="{x:Null}">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </ContentControl.Style>
            </ContentControl>
        </StackPanel>

        <Grid DockPanel.Dock="Top">
            
            <DataGrid ItemsSource="{Binding DataTable}" 
                      AutoGenerateColumns="True" 
                      LoadingRow="DataGrid_LoadingRow" 
                      CanUserAddRows="False" 
                      IsReadOnly="True" 
                      ScrollViewer.CanContentScroll="True"
                      ScrollViewer.VerticalScrollBarVisibility="Auto"
                      ScrollViewer.HorizontalScrollBarVisibility="Auto"/>
        </Grid>
    </DockPanel>
</Window>
